---
title: "Shiny Tutorial"
author: "Dani Cosme & Sam Chavez"
date: "June 7, 2018"
output: 
  html_document:
    highlight: haddock
    theme: flatly
    toc: yes
    toc_float: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Share Your Shiny App

Step 1: Create an account on shinyapps.io (https://www.shinyapps.io/admin/#/signup)
  - Create an account name and then hit enter/return.
  
Step 2: Configure your account.  
  - Install rsconnect package in R
  - Click the "show secret" button in step 2 of shinyapps.io
  - Click the "copy to clipboard" button in step 2 of shinyapps.io
  - Copy the info in the popup and paste it into R & run
  - Load rsconnect library
  
Step 3: After you've created an awesome, original shiny app IN ITS OWN FOLDER
  - Set your working directory to your shiny app folder
  - Deploy your shiny app with rsconnect::deployApp()

```{r creating sharable shiny apps}
#install.packages('rsconnect')

##you should replace this with your own info from 
#rsconnect::setAccountInfo(name='schavez', token='a bunch of numbers and letters', secret='secret numbers and letters')
library(rsconnect)

#Last Step: This step is for after you've made a shiny app
#setwd("~/UO/Spring 2018/Data Science/personal_site/shinythings/shinytest/")
#rsconnect::deployApp()

```

## The Structure of a Shiny App

Shiny apps are contained in a single, integrated script called app.R.

This script has at least three components:

- a user interface object (can be a call to a separate ui.R script)
- a server function (can be a call to a separate server.R script)
- a call to the shinyApp function
- optional: extra stuff in your global environment (can be a call to a separate global.R script)
- If you want to host your shiny app, save this script as app.R and put it in it's own folder.  The name for that folder will be the name of your shiny app.

```{r structure of a shiny app, eval=FALSE, include=TRUE}

# If you choose to host this app online, you'll need to copy everything in this code chunk and save it to app.R in it's own folder.  Then, set your working directory to the saved folder.  Finally, use the command 'rsconnect::deployApp()' to host your app.

# Here's a user interface (ui) component
library(shiny)

# Define UI for app that draws a histogram ----
ui <- fluidPage(

  # App title ----
  titlePanel("Hello Shiny!"),

  # Sidebar layout with input and output definitions ----
  sidebarLayout(

    # Sidebar panel for inputs ----
    sidebarPanel(

      # Input: Slider for the number of bins ----
      sliderInput(inputId = "bins",
                  label = "Number of bins:",
                  min = 1,
                  max = 50,
                  value = 30)

    ),

    # Main panel for displaying outputs ----
    mainPanel(

      # Output: Histogram ----
      plotOutput(outputId = "distPlot")

    )
  )
)

# Here's a server component

# Define server logic required to draw a histogram ----
server <- function(input, output) {

  # Histogram of the Old Faithful Geyser Data ----
  # with requested number of bins
  # This expression that generates a histogram is wrapped in a call
  # to renderPlot to indicate that:
  #
  # 1. It is "reactive" and therefore should be automatically
  #    re-executed when inputs (input$bins) change
  # 2. Its output type is a plot
  output$distPlot <- renderPlot({

    x    <- faithful$waiting
    bins <- seq(min(x), max(x), length.out = input$bins + 1)

    hist(x, breaks = bins, col = "#75AADB", border = "white",
         xlab = "Waiting time to next eruption (in mins)",
         main = "Histogram of waiting times")

    })

}

# When you've made both components, you're ready to call shinyApp

shinyApp(ui = ui, server = server)

```

## Layout

The layout of a shiny app is specified within the user interface with the function fluidPage() using the panel options.

 - Specify a title with titlePanel("my title")
 - Parition your layout into sidebar & main panels
 - Change the position of a panel
 - You can use some HTML5 tags without the <> brackets too
 - Use 'align' to change text justification
 - Use p() to create paragraphs
 
 And so much more...
 
```{r layout, eval=FALSE, include=TRUE}
 
ui <- fluidPage(
  titlePanel(em("my italicized title", align = "center")),
  
  sidebarLayout(position = "left",
                sidebarPanel(strong("my bold sidebar"),
                             img(src = "https://www.thefarmersbank.net/wp-content/uploads/2018/04/2005-Penny-Uncirculated-Obverse.png", height = 100, width = 100)),
                mainPanel(
                  h1("most important output"),
                  br(),
                  p("this is a paragraph that says nothing in particular.  it's just a bunch of sentences to illustrate a point about separating text.  watch, we're going to copy and paste it below as another paragraph."),
                  p("this is a paragraph that says nothing in particular.  it's just a bunch of sentences to illustrate a point about separating text."),
                  h2("less important blue output"),
                  h3(div("here's smaller text in blue", style = "color:blue")),
                  h4(p("here's a tiny text paragraph with just", span("a few orange words,", style = "color:orange"), "if you're into that."))
                )
  )
)

# Let's see what we created
# Uncomment the lines below and run this chunk only

server <- function(input, output) {
}
shinyApp(ui, server)

```

<iframe src="https://schavez.shinyapps.io/layout/" style="border: none; width: 700px; height: 500px"></iframe>



